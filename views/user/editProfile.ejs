<%-include('../partials/header')-%>

<main class="main">
    <div class="page-header text-center" style="background-image: url('assets/images/page-header-bg.jpg')">
        <div class="container">
            <h1 class="page-title">My Account<span> </span></h1>
        </div><!-- End .container -->
    </div><!-- End .page-header -->
    <nav aria-label="breadcrumb" class="breadcrumb-nav mb-3">
        <div class="container">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/">Home</a></li>
                <!-- <li class="breadcrumb-item"><a href="#">Shop</a></li> -->
                <li class="breadcrumb-item active" aria-current="page">My Account</li>
            </ol>
        </div><!-- End .container -->
    </nav><!-- End .breadcrumb-nav -->

    <div class="page-content">
        <div class="dashboard">
            <div class="container">
                <div class="row">
                    <aside class="col-md-4 col-lg-3">
                        <ul class="nav nav-dashboard flex-column mb-3 mb-md-0" role="tablist">
                            <li class="nav-item">
                                <a class="nav-link" id="tab-dashboard-link" href="/profile" role="tab" aria-controls="tab-dashboard" aria-selected="false">Dashboard</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="tab-orders-link" href="/orders" role="tab" aria-controls="tab-orders" aria-selected="false">Orders</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="tab-orders-link" href="/wallet" role="tab" aria-controls="tab-orders" aria-selected="false">wallet</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="tab-address-link" href="/addresses" role="tab" aria-controls="tab-address" aria-selected="false">Adresses</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link active" id="tab-account-link" href="/editProfile" role="tab" aria-controls="tab-account" aria-selected="true">Edit Profile</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="tab-account-link" href="/changePassword" role="tab" aria-controls="tab-account" aria-selected="false">Change Password</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="/logout">Sign Out</a>
                            </li>
                        </ul>
                    </aside><!-- End .col-lg-3 -->
                    <div class="col-md-8 col-lg-9">
                        <div class="tab-content">                                                                
                            <div class="tab-pane fade show active" id="tab-account" role="tabpanel" aria-labelledby="tab-account-link">
                                <form action="/editProfile" method="POST" onsubmit="return validate()">
                                    <div class="form-group">
                                        <label>Name <span style="color: red;">*</span></label>
                                        <input type="text" id="name" name="name" class="form-control" value="<%=user.name%>" required>
                                        <label style="display: none;" id="name-error"></label>
                                    </div>

                                    <div class="form-group">                                        
                                        <label>Email address <span style="color: red;">*</span></label>
                                        <input type="email" id="email" name="email" class="form-control" value="<%=user.email%>" required>
                                        <label style="display: none;" id="email-error"></label>
                                    </div>

                                    <div class="form-group">
                                        <label>Phone Number <span style="color: red;">*</span></label>
                                        <input type="text" id="phone" name="phone" class="form-control" value="<%=user.phone%>" required>
                                        <label style="display: none;" id="number-error"></label>
                                    </div>

                                    <div class="form-group">
                                        <button type="submit" class="btn btn-outline-primary-2">
                                            <span>SAVE CHANGES</span>
                                            <i class="icon-long-arrow-right"></i>
                                        </button>
                                    </div>
                                </form>
                            </div><!-- .End .tab-pane -->                                
                        </div>
                    </div><!-- End .col-lg-9 -->
                </div><!-- End .row -->
            </div><!-- End .container -->
        </div><!-- End .dashboard -->
    </div><!-- End .page-content -->
</main><!-- End .main -->


<script>
    function validate() {
        var name = document.getElementById("name").value.trim();
        var email = document.getElementById("email").value;
        var phone = document.getElementById("phone").value;
        var nameFormat = /^[a-zA-Z ]+$/;
        var emailFormat = /^\S+@\S+\.\S+$/;
        var phoneFormat = /^\d{10}$/;
        let nameError = document.getElementById("name-error");
        let emailError = document.getElementById("email-error");
        let phoneError = document.getElementById("number-error");
        if (!name.match(nameFormat)) {
            nameError.style.display = ''
            nameError.textContent = "Enter Correct Name!";
            nameError.style.color = "#ff4d4d";
            return false;
        } else nameError.style.display = 'none'

        if (!email.match(emailFormat)) {
            emailError.style.display = ''
            emailError.textContent = "Invalid Email Address!";
            emailError.style.color = "#ff4d4d";
            return false;
        } else emailError.style.display = 'none'

        if (!phone.match(phoneFormat)) {
            phoneError.style.display = ''
            phoneError.textContent = "Enter Valid Phone Number!";
            phoneError.style.color = "#ff4d4d";
            return false;
        } else phoneError.style.display = 'none'
        
        return true;
    }
</script>
<%-include('../partials/footer')-%>